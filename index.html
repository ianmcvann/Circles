<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Circles: Connections matter.</title>
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/spacing.css">
  <script defer src="/assets/font-awesome/js/solid.js"></script>
  <script defer src="/assets/font-awesome/js/fontawesome.js"></script>

</head>

<body>
  <div class="columns" id="main-cols">
    <div class="column is-3" id="left-circle-nav">
      <section class="section">
        <aside class="menu">
          <h1 class="title is-1">Circles</h1>
          <p class="menu-label">
            My Circles
          </p>
          <ul class="menu-list">
            <li><a class="is-active">Circle1</a></li>
            <li><a>Circle2</a></li>
          </ul>
          <p class="menu-label">
            Circle Members
          </p>
          <ul class="menu-list">
            <li><a>John Smith</a></li>
            <li><a>Jane Doe</a></li>
            <li><a>Ian McVann</a></li>
          </ul>
          <p class="menu-label">
            Account
          </p>
          <ul class="menu-list">
            <li><a>My Info</a></li>
            <li><a>Prefrences</a></li>
            <li><a>Billing</a></li>
          </ul>
          <h1 class="title is-3" id="welcome-text"></h1>
        </aside>
      </section>
    </div>
    <div id="collapse-btn-div">
      <i id="collapse-btn" onclick="collapseNav(event)" class="fas fa-angle-left fa-3x"></i>
    </div>
    <div id="main-area" class="collapsed">
      <div class="columns is-centered">
        <div class="column is-1 nav-arrow" id="left-arrrow">
          <i class="fas fa-chevron-circle-left fa-3x"></i>
        </div>
        <div class="column is-6" id="post-column">
          <section class="section" id="post-section">
            <div class="card">
              <div class="card-image">
                <figure class="image is-3by2">
                  <img class="post-img" src="assets/placeholder_1280x960.jpg" alt="Placeholder image">
                </figure>
              </div>
              <div class="card-content">
                <div class="media">
                  <div class="media-left">
                    <figure class="image is-48x48">
                      <img class="profile-img" src="assets/placeholder_96x96.jpg" alt="Placeholder image">
                    </figure>
                  </div>
                  <div class="media-content">
                    <p class="title is-4">John Smith</p>
                    <p class="subtitle is-6">@johnsmith</p>
                  </div>
                </div>

                <div class="content">
                  Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                  Phasellus nec iaculis mauris. <a>@bulmaio</a>.
                  <a href="#">#css</a> <a href="#">#responsive</a>
                  <br>
                  <time datetime="2016-1-1">11:09 PM - 1 Jan 2016</time>
                </div>
              </div>
            </div>
          </section>
        </div>
        <div class="column is-1 nav-arrow" id="right-arrow">
          <i class="fas fa-chevron-circle-right fa-3x"></i>
        </div>
        </div>
      </div>
    </div>
  <div class="modal is-active" id="memberModal">
    <div class="modal-background"></div>
    <div class="modal-content">
      <div class="box has-text-centered">
        <h1 class="title is-2">Circles</h1>
        <h1 class="subtitle is-4">Please login to continue.</h1>
        <div class="field">
          <p class="control has-icons-left has-icons-right">
            <input class="input" type="email" placeholder="Email" id="email">
            <span class="icon is-small is-left">
              <i class="fas fa-envelope"></i>
            </span>
            <span class="icon is-small is-right">
              <i class="fas fa-check"></i>
            </span>
          </p>
        </div>
        <div class="field">
          <p class="control has-icons-left">
            <input class="input" type="password" placeholder="Password" id="password">
            <span class="icon is-small is-left">
              <i class="fas fa-lock"></i>
            </span>
          </p>
        </div>
        <div class="field">
          <p class="control has-text-centered">
            <button class="button is-success are-medium" id="login-button">
              Login
            </button>
            <p>
              Don't have an account?
              <a id="signup-modal-btn">Sign Up</a>
            </p>
          </p>
        </div>
      </div>
    </div>
    <button class="modal-close is-large" aria-label="close" id="modal-close-button"></button>
  </div>
  <div class="modal" id="signupModal">
      <div class="modal-background"></div>
      <div class="modal-content">
        <div class="box has-text-centered">
          <h1 class="title is-2">Circles</h1>
          <h1 class="subtitle is-4">Please register to continue.</h1>
          <div class="field">
              <p class="control has-icons-left">
                <input class="input" type="text" placeholder="First Name" id="first-name">
                <span class="icon is-small is-left">
                  <i class="fas fa-user"></i>
                </span>
              </p>
            </div>
            <div class="field">
                <p class="control has-icons-left">
                  <input class="input" type="text" placeholder="Last Name" id="last-name">
                  <span class="icon is-small is-left">
                    <i class="fas fa-user"></i>
                  </span>
                </p>
              </div>
          <div class="field">
            <p class="control has-icons-left has-icons-right">
              <input class="input" type="email" placeholder="Email" id="email_signup">
              <span class="icon is-small is-left">
                <i class="fas fa-envelope"></i>
              </span>
              <span class="icon is-small is-right">
                <i class="fas fa-check"></i>
              </span>
            </p>
          </div>
          <div class="field">
            <p class="control has-icons-left">
              <input class="input" type="password" placeholder="Password" id="password_signup">
              <span class="icon is-small is-left">
                <i class="fas fa-lock"></i>
              </span>
            </p>
          </div>
          <div class="field">
              <p class="control has-icons-left">
                <input class="input" type="tel" placeholder="Phone Number (No dashes)" id="phone-num">
                <span class="icon is-small is-left">
                  <i class="fas fa-phone"></i>
                </span>
              </p>
          </div>
          <div class="field">
                <p class="control has-icons-left">
                  <input class="input" type="date" id="date-of-birth">
                  <span class="icon is-small is-left">
                    <i class="fas fa-calendar"></i>
                  </span>
                </p>
          </div>
          <div class="field">
            <p class="control has-text-centered">
              <button onclick="signupUser(event)" class="button is-success are-medium" id="signup-button">
                Register
              </button>
              <p>
                Already have an account?
                <a id="login-modal-btn">Login</a>
              </p>
            </p>
          </div>
        </div>
      </div>
      <button class="modal-close is-large" aria-label="close" id="signup-close-button"></button>
    </div>
</body>
<script src="/node_modules/firebase/firebase-app.js"></script>
<script src="/node_modules/firebase/firebase-auth.js"></script>
<script src="/node_modules/firebase/firebase-firestore.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDZQePGS6QojlnId_6nDntKYu1ZeKEgtl4",
    authDomain: "circles-network.firebaseapp.com",
    databaseURL: "https://circles-network.firebaseio.com",
    projectId: "circles-network",
    storageBucket: "circles-network.appspot.com",
    messagingSenderId: "500229346462"
  };
  firebase.initializeApp(config);
  var db = firebase.firestore()
</script>
<script>
  document.querySelector('#login-button').addEventListener("click", () => {
    var email = document.querySelector("#email");
    var password = document.querySelector("#password");
    firebase.auth().signInWithEmailAndPassword(email.value, password.value).then(function (user) {
      console.log("Signed in successfully")
      document.querySelector('#memberModal').classList.remove("is-active");
    }).catch(function (error) {
      var errorCode = error.code;
      var errorMessage = error.message;

      if (errorCode === 'auth/wrong-password') {
        alert('Wrong password.');
      } else {
        alert(errorMessage);
      }
      console.log(error);
    });
  });

  function collapseNav(event) {
    document.querySelector('#left-circle-nav').classList.toggle('collapsed');
    document.querySelector('#collapse-btn-div').classList.toggle("collapsed")
    document.querySelector('#collapse-btn').classList.toggle("collapsed")
    document.querySelector('#main-area').classList.toggle("collapsed")

    
  };
  document.querySelector('#modal-close-button').addEventListener("click", () => {
    document.querySelector('#memberModal').classList.toggle("is-active");
  })
  document.querySelector('#signup-close-button').addEventListener("click", () => {
    document.querySelector('#signupModal').classList.toggle("is-active");
  })
  document.querySelector('#signup-modal-btn').addEventListener("click", () => {
    document.querySelector('#memberModal').classList.remove("is-active");
    document.querySelector('#signupModal').classList.add("is-active");
  })
  document.querySelector('#login-modal-btn').addEventListener("click", () => {
    document.querySelector('#memberModal').classList.add("is-active");
    document.querySelector('#signupModal').classList.remove("is-active");
  })
  function signupUser(event) {
    var firstName = document.querySelector("#first-name");
    var lastName = document.querySelector("#last-name");
    var email = document.querySelector("#email_signup");
    var password = document.querySelector("#password_signup");
    var phone = document.querySelector("#phone-num");
    var dob = document.querySelector("#date-of-birth");
    firebase.auth().createUserWithEmailAndPassword(email.value, password.value).then(function (user) {
      console.log("Signed in successfully")
      document.querySelector('#signupModal').classList.remove("is-active");
    }).then(function(addUser) {
      db.collection("users").add({
        first_name: firstName.value,
        last_name: lastName.value,
        email: email.value,
        phone: phone.value,
        date_of_birth: dob.value,
    })}).catch(function (error) {
      var errorCode = error.code;
      var errorMessage = error.message;

      if (errorCode === 'auth/wrong-password') {
        alert('Wrong password.');
      } else {
        alert(errorMessage);
      }
      console.log(error);
    })
  }
</script>

</html>